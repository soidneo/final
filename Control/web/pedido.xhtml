<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <f:view renderKitId="PRIMEFACES_MOBILE" />
    <h:head>
        <title>Pedido</title>
        
    </h:head>
    <h:body>
        <pm:page id="first">
            <pm:header title="Ingresar Pedido" swatch="b"></pm:header>

           
                <h:form id="form">   
                    <pm:field>
                        <pm:field>
                            <p:outputLabel for="selectOneMenu" value="Categoria" />              
                            <p:selectOneMenu id="selectOneMenu" value="#{categoriaController.selected.id}"
                                            >
                                <p:ajax  listener="#{categoriaController.asignarCategoria}" update="form">
                                    
                                </p:ajax>
                                <f:selectItem itemLabel="Seleccione" itemValue="" />
                                <f:selectItems var="cat" value="#{categoriaController.items}"
                                               itemLabel="#{cat.nombre}" itemValue="#{cat.id}"/>
                                
                            </p:selectOneMenu>
                        </pm:field> 
                        
                        <pm:field>
                            <p:outputLabel for="selectOneMenu2" value="Producto" />              
                            <p:selectOneMenu id="selectOneMenu2" value="#{categoriaController.pedido.serial}">
                
                                <f:selectItem itemLabel="Seleccione" itemValue="" />
                                <f:selectItems var="prod" value="#{categoriaController.listaProductos}"
                                               itemLabel="#{prod.idProducto.nombre}" itemValue="#{prod.serial}"/>
                                
                            </p:selectOneMenu>
                            
                        </pm:field> 
                        
                       
                        <pm:field>
                            <p:outputLabel for="mesa" value="Mesa" />
                            <p:inputText id="mesa" value="#{categoriaController.pedidoMaestro.mesa}"/>
                       </pm:field>
                        
                        <pm:field>
                             
                            <p:outputLabel for="cantidad" value="Cantidad" />
                            <p:inputText id="cantidad" value="#{categoriaController.detalle.cantidad}"/>
                            
                        </pm:field>
                        
                       <pm:field>
                           <p:commandButton ajax="true" update="tabla" 
                                            value="agregar"  actionListener="#{categoriaController.agregarPedido}">
                            
                           </p:commandButton>
                       </pm:field>
                        
                        <pm:field>
                            <p:dataTable value="#{categoriaController.pedidoMaestro.detallesPedido}"
                                         var="detalle" tableStyleClass="ui-table-columntoggle" id="tabla">
                                
                                <p:column headerText="Producto" >
                                    <h:outputText value="#{detalle.producto.idProducto.nombre}" />
                                </p:column>
                                <p:column headerText="Mesa" >
                                    <h:outputText value="#{categoriaController.pedidoMaestro.mesa}" />
                                </p:column>
                                <p:column headerText="Mesa" >
                                    <h:outputText value="#{categoriaController.pedidoMaestro.mesa}" />
                                </p:column>
                                
                            </p:dataTable>
                        </pm:field>
                        <p:commandButton value="Confirmar Pedido"
                                         actionListener="#{categoriaController.agregarPedidoMaestro()}"/>
                        
                    </pm:field> 
                </h:form>
           

        </pm:page>
    </h:body>
</html>
